Comps.CartComp=function(t){this.compId=t.compId,this.config=t},Comps.CartComp.prototype.init=function(){var t=this,o=this.config.needAsyncInit,e=this.config.topic,a=e.split(","),i=$(".j_productModel");this.liModel=i,i.remove(),$.each(a,function(){CompMessage.subscribe(this,function(){t.loadData()})}),o&&this.loadData(),this._bindEvent()},Comps.CartComp.prototype.loadData=function(){var t=this,o=this.config.compId;$.ajax({url:"/cartComp/ajaxLoadData.json",data:{compId:o},success:function(o){t._render(o.data),Utils.ajaxLoadComplate(t)}})},Comps.CartComp.prototype._isLogin=function(){$.ajax({url:"/cartComp/isLogin.json",success:function(t){return t}})},Comps.CartComp.prototype._render=function(t){var o,e,a=this.config.compId,i=$("#"+a+"_totalPrice"),r=$("#"+a+"_price"),n=$("#"+a+"_num");$.isEmptyObject(t)?(o=0,e=0):(o=t.totalNum,e=t.totalPrice),i.html(e),r.html(e),n.html(o),this._renderUpFrame(t),0==this.config.isEasyMode?$("#"+this.config.compId+"_drop").remove():this._renderDropFrame(t)},Comps.CartComp.prototype._renderUpFrame=function(){var t=this.config.compId,o=$("#"+t+"_cartUrl"),e=$("#"+t+"_img");e.prop("src",this.config.imgUrl),o.prop("href",this.config.cartShopUrl)},Comps.CartComp.prototype._renderDropFrame=function(t){var o=this,e=this.config.compId,a=$("#"+e+"_product");a.html("");var i=this.liModel;if(!$.isEmptyObject(t)){for(var r=t.productList,n=0;n<r.length;++n){var c=r[n],p=i.clone(),s=p.find(".j_productId"),d=p.find(".j_attrId"),l=p.find(".j_productName"),m=p.find(".j_productPrice"),u=p.find(".j_productNum"),h=p.find(".j_productUrl"),f=p.find(".j_productImg");s.html(c.productId),l.html(c.productName),d.html(c.attrId),m.html(c.productPrice),u.html(c.productNum),h.prop("href",o.config.productUrl+c.productId),f.prop("src",c.productImg),a.append(p)}i.remove()}},Comps.CartComp.prototype._deletePro=function(t){var o=this.config.compId,e=t.find(".j_productId").html().trim(),a=t.find(".j_attrId").html().trim();$.ajax({url:"/cartComp/deletePro.json",data:{productId:e,attrId:a},success:function(e){var a=$("#"+o+"_totalPrice"),i=$("#"+o+"_price"),r=$("#"+o+"_num");$.isEmptyObject(e)?(a.html(0),i.html(0),r.html(0)):(a.html(e.totalPrice),i.html(e.totalPrice),r.html(e.totalNum)),t.remove()}})},Comps.CartComp.prototype._bindEvent=function(){var t=this.config.compId;$("#"+t).delegate(".j_deletePro","click",function(){var t=$(this).parents(".j_productModel");this._deletePro(t)})},Comps.CategoryComp=function(t){this.compId=t.compId,this.config=t},Comps.CategoryComp.prototype.init=function(){var t=this.config.needAsyncInit;t&&this.ajaxLoadData()},Comps.CategoryComp.prototype.ajaxLoadData=function(){var t=this,o=this.config.compId;$.ajax({url:"/categoryComp/ajaxLoadData.json",data:{compId:o},success:function(o){t.render(o.data),Utils.ajaxLoadComplate(t)}})},Comps.CategoryComp.prototype.render=function(t){var o=this.config.compId,e=this.config.showType,a=this.config.firstLevelNum,i=$("#"+o+"_dropDiv"),r=$("#"+o+"_loop"),n=r.find("li");0==e&&i.prop("style","display:block");var c=t.length;c>a&&(c=a);for(var p=0;p<c;++p){var s=t[p],d=n.clone();d=this._renderFirstCat(d,s),d=this._renderRitghtCat(d,s),r.append(d)}n.remove()},Comps.CategoryComp.prototype._renderFirstCat=function(t,o){var e=this.config.showLevel,a=this.config.isShowImage,i=this.config.secondLevelNum,r=t.find(".j_catImg"),n=t.find(".j_firstCat"),c=t.find(".j_secCatLoop"),p=c.find(".j_secCat");if(0==a&&r.prop("src",o.img),n.html(o.categoryName),n.prop("href",o.url),1==e){var s=o.subCategory,d=s.length;d>i&&(d=i);for(var l=0;l<d;++l){var m=s[l],u=p.clone();u.prop("href",m.url),u.html(m.categoryName),c.append(u)}}return p.remove(),t},Comps.CategoryComp.prototype._renderRitghtCat=function(t,o){for(var e=t.find(".j_rightLoop"),a=e.find(".j_rightDl"),i=o.subCategory,r=0;r<i.length;++r){var n=i[r],c=a.clone(),p=c.find(".j_rightSecCat");p.prop("href",n.url),p.html(n.categoryName);var s=c.find(".j_rightThdCatLoop"),d=c.find(".j_rightThdCat"),l=n.subCategory;if(!$.isEmptyObject(l))for(var m=0;m<l.length;++m){var u=l[m],h=d.clone();h.prop("href",u.url),h.html(u.categoryName),s.append(h)}d.remove(),e.append(c)}return a.remove(),t},Comps.CollectionProduct=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName,this.imgSrc=t.imgSrc,this.topic=t.topic,this.collectProductUrl=t.collectProductUrl},Comps.CollectionProduct.prototype.GetQueryString=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?unescape(e[2]):null},Comps.CollectionProduct.prototype.init=function(){var t=this;t.GetQueryString("productUuid");this.needAsyncInit&&$.ajax({type:"GET",url:"/collectionProductComp/ajaxLoadData",data:{lableName:t.lableName,imgSrc:t.imgSrc},dataType:"json",async:!0,success:function(o){$("#"+t.compId+"_collectionproduct_img").attr("src",o.imgSrc),$("#"+t.compId+"_collectionproduct_span").text(o.lableName),Utils.ajaxLoadComplate(t)}})},Comps.CollectionProduct.prototype.collectProduct=function(t){var o=this,e="/collectionProductComp/collectProduct";$.ajax({type:"GET",url:e,data:{productUuid:t,ranNum:Math.random()},dataType:"json",async:!1,success:function(t){var e="<B>";"1"==t.state?e="收藏成功,":"2"==t.state?e="收藏失败,":"3"==t.state&&(e="您已经收藏过改商品了"),e+="</B>",layui.use("layer",function(){layer.open({type:1,area:["400px","300px"],content:e+"<br>共收藏了"+t.count+"个商品<font color='red'><a href='"+o.collectProductUrl+"'>查看收藏夹</a></font>"})}),Utils.ajaxLoadComplate(o)}})},Comps.CollectionProduct.prototype.bindSomeEvent=function(){var t=this,o=t.GetQueryString("productUuid");$("#"+t.compId+"_collectionproduct_a").click(function(){CompMessage.publish(t.topic,"",function(e){t.collectProduct(o)})})},Comps.CollectionShop=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName,this.topic=t.topic,this.imgSrc=t.imgSrc,this.collectShopUrl=t.collectShopUrl},Comps.CollectionShop.prototype.GetQueryString=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?unescape(e[2]):null},Comps.CollectionShop.prototype.init=function(){var t=this;t.GetQueryString("shopUuid");this.needAsyncInit&&$.ajax({type:"GET",url:"/collectionShopComp/ajaxLoadData",data:{lableName:t.lableName,imgSrc:t.imgSrc},dataType:"json",async:!0,success:function(o){$("#"+t.compId+"_collectionshop_img").attr("src",o.imgSrc),$("#"+t.compId+"_collectionshop_span").text(o.lableName),Utils.ajaxLoadComplate(t)}})},Comps.CollectionShop.prototype.collectShop=function(t){var o=this,e="/collectionShopComp/collectShop";$.ajax({type:"GET",url:e,data:{shopUuid:t,ranNum:Math.random()},dataType:"json",async:!1,success:function(t){var e="<B>";"1"==t.state?e="收藏成功,":"2"==t.state?e="收藏失败,":"3"==t.state&&(e="您已经收藏过该店铺了"),e+="</B>",layui.use("layer",function(){layer.open({type:1,area:["400px","300px"],content:e+"<br>共收藏了"+t.count+"个店铺<font color='red'><a href='"+o.collectShopUrl+"'>查看收藏夹</a></font>"})}),Utils.ajaxLoadComplate(o)}})},Comps.CollectionShop.prototype.bindSomeEvent=function(){var t=this,o=t.GetQueryString("shopUuid");$("#"+t.compId+"_collectionshop_a").click(function(){CompMessage.publish(t.topic,"",function(e){t.collectShop(o)})})},Comps.ColumnNavigation=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.categoryUuid=t.categoryUuid},Comps.ColumnNavigation.prototype.bindSomeEvent=function(){for(var t=0;t<15;t++)for(var o=0;o<15;o++)$("#"+this.compId+"columnnavigation_thirdtitle"+t+o).click(function(){var t=$(this).attr("content");if(t&&""!=t)$("#help-breadcrumb").html(t);else{var o=$(this).attr("url");window.open(o)}})},Comps.ColumnNavigation.prototype.init=function(){var t=this;this.needAsyncInit&&$.ajax({type:"GET",url:"/columnNavigationComp/ajaxLoadData",data:{categoryUuid:t.categoryUuid},dataType:"json",async:!0,success:function(o){$("#help-breadcrumb").html("");var e=$("#"+t.compId+"_columnnavigation_panelgroup"),a=$("#"+t.compId+"_columnnavigation_panel").clone();$("#"+t.compId+"_columnnavigation_panel").remove(),$.each(o.contentSubCateList,function(o,i){a.find(".columnnavigation_sencondtitle").text(i.key.categoryName),a.attr("id",t.compId+"_columnnavigation_panel"+(o+1)),e.append(a[0].outerHTML);var r=e.find("#"+t.compId+"_columnnavigation_panel"+(o+1));r.find(".columnnavigation_span_toggle").attr("data-target","#panel"+o),r.find(".columnnavigation_toggle").attr("id","panel"+o),console.log(r[0].outerHTML);var n=r.find(".columnnavigation_ul"),c=r.find(".columnnavigation_li").clone();$.each(i.value,function(e,a){c.find(".columnnavigation_thirdtitle").attr("id",t.compId+"columnnavigation_thirdtitle"+o+e),c.find(".columnnavigation_thirdtitle").text(a.contentTitle),c.find(".columnnavigation_thirdtitle").attr("content",a.introduction),n.append(c[0].outerHTML),$("#"+t.compId+"columnnavigation_thirdtitle"+o+e).bind("click",function(){var t=$(this).attr("content");t&&""!=t?$("#help-breadcrumb").html(t):window.open(a.url)})})}),Utils.ajaxLoadComplate(t)}})},Comps.Floor=function(t){this.compId=t.compId,this.showtype=t.showtype},Comps.Floor.prototype.init=function(){this.showtype&&$(".m-fixfloor").hide(),Utils.ajaxLoadComplate(that)},Comps.FloorLable=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName},Comps.FloorLable.prototype.init=function(){var t=this;this.needAsyncInit&&$.ajax({type:"GET",url:"/floorLableComp/ajaxLoadData",data:{lableName:t.lableName},dataType:"json",async:!0,success:function(o){$("#"+t.compId+"_lablename").text(o.lableName),Utils.ajaxLoadComplate(t)}})},Comps.FullSearchComp=function(t){this.compId=t.compId,this.config=t},Comps.FullSearchComp.prototype.init=function(){var t=this.config.needAsyncInit;t&&(this._loadData(),Utils.ajaxLoadComplate(this)),this._bindEvent()},Comps.FullSearchComp.prototype._loadData=function(){var t=this.config.isHaveHot,o=this.config.hotWords,e=this.config.compId,a="",i=this.config.defaultSelect,r=$("#"+e+"_typeProduct"),n=$("#"+e+"_typeStore"),c=$("#"+e+"_typeValue");1==i?(n.addClass("current"),r.removeClass("current"),c.val("store")):(r.addClass("current"),n.removeClass("current"),c.val("product")),$.isEmptyObject(o)||(a=o.split(","));var p=this.config.productSearchUrl,e=this.config.compId,s=$("#"+e+"_hotwords"),d=s.find(".j_hotword");if("1"==t)for(var l=0;l<a.length;++l){var m=a[l],u=d.clone();u.prop("href",p+m),u.html(m),s.append(u)}d.remove()},Comps.FullSearchComp.prototype.search=function(t){var o,e=this.config.compId;o="product"==t?this.config.productSearchUrl:this.config.storeSearchUrl;var a=$("#"+e+"_keyword").val();$.isEmptyObject(a)&&(a=""),window.location.href=o+a},Comps.FullSearchComp.prototype._bindEvent=function(){var t=this,o=this.config.compId;$("#"+o+"_search").click(function(){var e=$("#"+o+"_typeValue").val();t.search(e)}),$("#"+o+"_searchType li").click(function(){$("#"+o+"_typeValue").val($(this).data("searchtype")),$("#"+o+"_searchType li").removeClass("current"),$(this).addClass("current")})},Comps.ImageTextEditor=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.defineWidth=t.defineWidth,this.defineHeight=t.defineHeight,this.content=t.content},Comps.ImageTextEditor.prototype.init=function(){var t=this;this.needAsyncInit&&($("#"+t.compId+"_content").height(t.defineHeight),$("#"+t.compId+"_content").width(t.defineWidth),$("#"+t.compId+"_content").html(decodeURI(t.content))),Utils.ajaxLoadComplate(t)},Comps.NavigationComp=function(t){this.compId=t.compId,this.config=t},Comps.NavigationComp.prototype.init=function(){var t=this.config.needAsyncInit;t&&this.ajaxLoad()},Comps.NavigationComp.prototype.ajaxLoad=function(){var t=this,o=this.config.compId;$.ajax({url:"/navigationComp/ajaxLoadData.json",data:{compId:o},success:function(o){var e=o.data;t._loadData(e),Utils.ajaxLoadComplate(t)}})},Comps.NavigationComp.prototype._loadData=function(t){for(var o=this.config.compId,e=$("#"+o+"_channelUl"),a=e.find(".j_channel"),i=0;i<t.length;++i){var r=t[i],n=a.clone(),c=n.find("a");$.isEmptyObject(r.channelUrl)?c.prop("href",this.config.customUrl+r.pageUuid):c.prop("href",r.channelUrl),c.html(r.channelName),e.append(n)}a.remove()},Comps.NoticeComp=function(t){this.compId=t.compId,this.config=t},Comps.NoticeComp.prototype.init=function(){var t=this.config.needAsyncInit,o=this.config.rollType;1==o&&jQuery(".noticeWrap").slide({mainCell:".bd ul",autoPlay:!0,effect:"topMarquee",vis:5,interTime:50,trigger:"click"}),t&&this.ajaxLoad()},Comps.NoticeComp.prototype.ajaxLoad=function(){var t=this;$.ajax({url:"/noticeComp/ajaxLoadData.json",data:{contentCateUuid:t.config.categoryId},success:function(o){var e=o.data;t._loadData(e),Utils.ajaxLoadComplate(t)}})},Comps.NoticeComp.prototype._loadData=function(t){var o=this.config.compId,e=this.config.rollType,a=this.config.categoryUrl,i=this.config.categoryId,r=$("#"+o+"_categoryName"),n=$("#"+o+"_categoryUrl");r.html(this.config.categoryName),n.prop("href",a+i);for(var c=$("#"+o+"_loop"),p=c.find("li"),s=0;s<t.length;++s){var d=t[s],l=p.clone();this._renderLi(l,d),c.append(l)}p.remove(),1==e&&jQuery(".noticeWrap").slide({mainCell:".bd ul",autoPlay:!0,effect:"topMarquee",vis:5,interTime:50,trigger:"click"})},Comps.NoticeComp.prototype._renderLi=function(t,o){var e=this.config.contentUrl,a=t.find(".j_contentUrl"),i=t.find(".j_note"),r=t.find(".j_title");a.prop("href",e+o.contentId),i.html(o.note),r.html(o.title)},Comps.PictureAd=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.imgSrc=t.imgSrc,this.defineUrl=t.defineUrl,this.defineWidth=t.defineWidth,this.defineHeight=t.defineHeight},Comps.PictureAd.prototype.GetQueryString=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?unescape(e[2]):null},Comps.PictureAd.prototype.init=function(){var t=this;this.needAsyncInit&&($("#"+t.compId+"_img").attr("src",t.imgSrc),$("#"+t.compId+"_img").attr("width",t.defineWidth),$("#"+t.compId+"_img").attr("height",t.defineHeight)),t.bindSomeEvent(),Utils.ajaxLoadComplate(t)},Comps.PictureAd.prototype.bindSomeEvent=function(){var t=this;$("#"+t.compId+"_a").click(function(){window.open(t.defineUrl)})},Comps.ProductList=function(t){this.compId=t.compId,this.config=t},Comps.ProductList.prototype.init=function(){var t=this,o=t.config.needAsyncInit,e=$("#"+t.config.compId+"_productTotalNum").html();o?t.ajaxLoadData():t._initPages(e,t.config.pageShow),this.bindEvent()},Comps.ProductList.prototype.ajaxLoadData=function(t){var o=this,e={compId:o.config.compId,keyword:o._getUrlParam("keyword"),categoryUuid:o._getUrlParam("categoryUuid"),sortType:o._getUrlParam("sortType"),sortBy:o._getUrlParam("sortBy"),attrValue:o._getUrlParam("attrValue"),nowPage:o._getUrlParam("nowPage"),pageShow:o.config.pageShow};$.extend(e,t),$.ajax({url:"/productListComp/ajaxLoadData.json",data:e,success:function(t){o._renderProdcutList(t),o._initPages(t.totalNum,t.pageShow),Utils.ajaxLoadComplate(o)}})},Comps.ProductList.prototype._renderProdcutList=function(t){var o=this.config.compId,e=$("#"+o+"_products"),a=$("#"+o+"_noResult"),i=$("#"+o+"_productLoop"),r=$("#"+o+"_productTotalNum"),n=e.find(".j_product").first();e.find(".j_product").remove();var c=t.productList;if(c.length>0){r.html(t.totalNum),a.remove();for(var p=0;p<c.length;++p){var s=c[p],d=n.clone();this._renderProductInfo(d,s),i.append(d)}}else n.remove()},Comps.ProductList.prototype._renderProductInfo=function(t,o){var e=t.find(".j_productId"),a=t.find(".j_pic"),i=t.find(".j_picHover"),r=t.find(".j_score"),n=t.find(".j_productName"),c=t.find(".j_productUrl"),p=t.find(".j_recommend"),s=t.find(".j_price"),d=t.find(".j_storeName"),l=t.find(".j_storeLogo");e.html(o.productId),a.prop("src",o.pic),a.prop("alt",o.productName),i.prop("src",o.pic),i.prop("alt",o.productName),r.prop("style","width:"+20*o.score+"%"),n.prop("href",this.config.productInfoUrl+o.productId),n.html(o.productName),c.prop("href",this.config.productInfoUrl+o.productId),p.html(o.recommend),s.html(o.price),d.prop("title",o.storeName),l.prop("src",o.storeLogo)},Comps.ProductList.prototype._initPages=function(t,o){var e=this,a=e.config.compId;layui.use(["laypage","layer"],function(){var i=layui.laypage,r=(layui.layer,Math.ceil(t/o));r<1&&(r=1);var n=window.location.href,c=new RegExp("(^|&)nowPage=([^&]*)"),p=n.match(c);if(!$.isEmptyObject(p))var s=p[2];i({cont:a+"_paging",pages:r,groups:5,curr:s,jump:function(t,o){if(!o){var a=$.isEmptyObject(p)?"":p[0];e.changeUrl(n,a,"&nowPage="+t.curr),e.ajaxLoadData(),$("html,body").animate({scrollTop:$("#"+e.config.compId+"_productLoop").offset().top},0)}}})})},Comps.ProductList.prototype.changeUrl=function(t,o,e){var a=document.title,i={url:t,title:a};$.isEmptyObject(o)?t+=e:t=t.replace(o,e),window.history.pushState(i,a,t)},Comps.ProductList.prototype._getUrlParam=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?decodeURIComponent(e[2]):null},Comps.ProductList.prototype.collectProduct=function(t){var o=this,e=this.config.compId,a=$(t).parents(".j_product"),i=a.find(".j_productId"),r=i.html().trim(),n=$("#"+e+"_returnMessage"),c=$("#"+e+"_collectNum"),p=$("#"+e+"_collectUrl"),s="/productListComp/collectProduct.json";$.ajax({url:s,data:{productUuid:r},success:function(t){var a=t.code,i=t.totalNum;1==a?(c.html(i),p=o.config.favoriteProUrl,n.html("收藏成功！")):2==a?(c.html(i),p=o.config.favoriteProUrl,n.html("收藏失败！")):3==a?(c.html(i),p=o.config.favoriteProUrl,n.html("您已经收藏此商品了！")):n.html(t),$("#"+e+"_modal-collect-form").modal("show")},error:function(t){alert(t.responseText)}})},Comps.ProductList.prototype.bindEvent=function(){var t=this,o=t.config.compId;$("#"+o).delegate(".j_collectProduct","click",function(){var o=this;CompMessage.publish(t.config.topic,"",function(e){t.collectProduct(o)})}),$("a[id^='"+o+"_sort_']").click(function(){var o=$(this).prop("name"),e="1",a=$(this).find("i").attr("class");"fa fa-long-arrow-up"==a?e="1":"fa fa-long-arrow-down"==a&&(e="2");var i={sortBy:o,sortType:e,nowPage:"1"};$(this).find(".fa").toggleClass("fa-long-arrow-down").toggleClass("fa-long-arrow-up"),t.ajaxLoadData(i)}),$("#"+o+"_productPicSmall").click(function(){$("#"+o).removeClass("m-pdblock"),$("#"+o).addClass("m-pdlist"),$("#"+o+"_productPicBig").removeClass("active"),$(this).removeClass("active")}),$("#"+o+"_productPicBig").click(function(){$("#"+o).removeClass("m-pdlist"),$("#"+o).addClass("m-pdblock"),$("#"+o+"_productPicSmall").removeClass("active"),$(this).removeClass("active")})},Comps.Qrcode=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.imgSrc=t.imgSrc,this.defineUrl=t.defineUrl,this.defineWidth=t.defineWidth,this.defineHeight=t.defineHeight,this.qrtype=t.qrtype,this.productUrl=t.productUrl,this.shopUrl=t.shopUrl},Comps.Qrcode.prototype.GetQueryString=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?unescape(e[2]):null},Comps.Qrcode.prototype.init=function(){var t=this,o="";if("define"==t.qrtype&&(o=t.defineUrl),"product"==t.qrtype){var e=t.GetQueryString("productUuid");o=t.productUrl+"&productUuid="+e}if("shop"==t.qrtype){var a=t.GetQueryString("shopUuid");o=t.shopUrl+"&shopUuid="+a}this.needAsyncInit&&$.ajax({type:"GET",url:"/qrCodeComp/ajaxLoadData",data:{imgSrc:t.imgSrc,defineWidth:t.defineWidth,defineHeight:t.defineHeight,defineUrl:o,qrtype:t.qrtype},dataType:"json",async:!0,success:function(e){o=escape(o),$("#"+t.compId+"_qrcode_codeimg").attr("src","/qrCodeComp/createQrCode?defineWidth="+t.defineWidth+"&defineHeight="+t.defineHeight+"&imgSrc="+t.imgSrc+"&defineUrl="+o),Utils.ajaxLoadComplate(t)}})},Comps.Qrcode.prototype.bindSomeEvent=function(){$(".j_qrcode_codeimg").css("display","none"),$(".j_qrcode_img").bind("mouseover",function(){$(".j_qrcode_codeimg").css("display","block")}).bind("mouseleave",function(){$(".j_qrcode_codeimg").css("display","none")})},Comps.RecommendShop=function(t){this.compId=t.compId,this.shopUuid=t.param_inShopUuids,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName,this.shopUrl=t.shopUrl},Comps.RecommendShop.prototype.init=function(){var t=this;this.needAsyncInit?$.ajax({type:"GET",url:"/recommendShopComp/ajaxLoadData",data:{shopUuid:t.shopUuid,lableName:t.lableName},dataType:"json",async:!0,success:function(o){var e=o.rows;$(".j_recommendshop_lable").html(o.lableName);var a=$(".j_recommendshop_list").eq(0).clone();$(".j_recommendshop_all").html("");for(var i=0;i<e.length;i++)a.find(".j_recommendshop_img").attr("src",e[i].logoUrl),a.find(".j_recommendshop_name").text(e[i].name),a.find(".j_recommendshop_name").attr("uuid",e[i].shopUuid),a.find(".j_recommendshop_conduct").text(e[i].conduct),$(".j_recommendshop_all").append(a[0].outerHTML);t.bindSomeEvent(),Utils.ajaxLoadComplate(t)}}):t.bindSomeEvent()},Comps.RecommendShop.prototype.bindSomeEvent=function(){var t=this;$(".j_recommendshop_list").each(function(){$(this).bind("click",function(){var o=$(this).find("div.j_recommendshop_name").attr("uuid");window.open(t.shopUrl+"&shopUuid="+o)})})},Comps.RecommendShopProduct=function(t){this.compId=t.compId,this.productUuid=t.param_inProductUuids,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName,this.productUrl=t.productUrl},Comps.RecommendShopProduct.prototype.init=function(){var t=this;this.needAsyncInit?$.ajax({type:"GET",url:"/recommendShopProductComp/ajaxLoadData",data:{productUuid:this.productUuid,lableName:this.lableName},dataType:"json",async:!0,success:function(o){var e=o.rows;$(".j_recommendshopproduct_lable").html(o.lableName);var a=$(".j_recommendshopproduct_list").eq(0).clone();$(".j_recommendshopproduct_all").html("");for(var i=0;i<e.length;i++)a.find("img").attr("src",e[i].imgsrc),a.find("div.j_recommendshopproduct_title").text(e[i].name),a.find("div.j_recommendshopproduct_title").attr("uuid",e[i].productUuid),a.find("div.j_recommendshopproduct_price").text(e[i].price),$(".j_recommendshopproduct_all").append(a[0].outerHTML);t.bindSomeEvent(),Utils.ajaxLoadComplate(t)}}):t.bindSomeEvent()},Comps.RecommendShopProduct.prototype.bindSomeEvent=function(){var t=this;$(".j_recommendshopproduct_list").each(function(){$(this).bind("click",function(){var o=$(this).find("div.j_recommendshopproduct_title").attr("uuid");window.open(t.productUrl+"&productUuid="+o)})})},Comps.RecommendProduct=function(t){this.compId=t.compId,this.productUuid=t.param_inProductUuids,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName,this.productUrl=t.productUrl},Comps.RecommendProduct.prototype.init=function(){var t=this;this.needAsyncInit?$.ajax({type:"GET",url:"/recommendProductComp/ajaxLoadData",data:{productUuid:this.productUuid,lableName:this.lableName},dataType:"json",async:!1,success:function(o){var e=o.rows;$(".j_recommendproduct_lable").html(o.lableName);var a=$(".j_recommendproduct_list").eq(0).clone();$(".j_recommendproduct_all").html("");for(var i=0;i<e.length;i++)a.find("img").attr("src",e[i].imgsrc),a.find("div.j_recommendproduct_title").text(e[i].name),a.find("div.j_recommendproduct_title").attr("uuid",e[i].productUuid),a.find("div.j_recommendproduct_price").text(e[i].price),$(".j_recommendproduct_all").append(a[0].outerHTML);t.bindSomeEvent(),Utils.ajaxLoadComplate(t)}}):t.bindSomeEvent()},Comps.RecommendProduct.prototype.bindSomeEvent=function(){var t=this;$(".j_recommendproduct_list").each(function(){$(this).bind("click",function(){var o=$(this).find("div.j_recommendproduct_title").attr("uuid");window.open(t.productUrl+"&productUuid="+o)})})},Comps.Reputation=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName,this.collectShopUrl=t.collectShopUrl,this.topic=t.topic},Comps.Reputation.prototype.GetQueryString=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?unescape(e[2]):null},Comps.Reputation.prototype.init=function(){var t=this,o=this.GetQueryString("productUuid");this.needAsyncInit?$.ajax({type:"GET",url:"/reputationComp/ajaxLoadData",data:{productUuid:o,lableName:t.lableName},dataType:"json",async:!0,success:function(o){$("#"+t.compId+"_reputation_img").attr("src",o.shopUrl),$("#"+t.compId+"_reputation_img_a").attr("href","/dfFront/toShopPage/"+o.shopUuid+"/pc"),$("#"+t.compId+"_reputation_name").attr("href","/dfFront/toShopPage/"+o.shopUuid+"/pc"),$("#"+t.compId+"_reputation_name_span").first().text(o.shopName),$("#"+t.compId+"_lablename").first().text(o.lableName),$("#"+t.compId+"_reputation_i").attr("uuid",o.shopUuid),$("#"+t.compId+"_reputation_i").attr("uuid",o.shopUuid),$("#"+t.compId+"_reputation_score").attr("style","width:"+20*o.scoreTotal+"%"),t.bindSomeEvent(),Utils.ajaxLoadComplate(t)}}):t.bindSomeEvent()},Comps.Reputation.prototype.bindSomeEvent=function(){var t=this;$("#"+t.compId+"_reputation_i").click(function(){var o=$(this).attr("uuid");CompMessage.publish(t.topic,"",function(e){t.collectShop(o)})})},Comps.Reputation.prototype.collectShop=function(t){var o=this,e="/collectionShopComp/collectShop";$.ajax({type:"GET",url:e,data:{storeUuid:t,ranNum:Math.random()},dataType:"json",async:!1,success:function(t){var e="<B>";"1"==t.state?e="收藏成功,":"2"==t.state?e="收藏失败,":"3"==t.state&&(e="您已经收藏过该店铺了"),e+="</B>",layui.use("layer",function(){layer.open({type:1,area:["400px","300px"],content:e+"<br>共收藏了"+t.count+"个店铺<font color='red'><a href='"+o.collectShopUrl+"'>查看收藏夹</a></font>"})}),Utils.ajaxLoadComplate(o)}})},Comps.ReputationSample=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName},Comps.ReputationSample.prototype.init=function(){var t=this;this.needAsyncInit?$.ajax({type:"GET",url:"/reputationSampleComp/ajaxLoadData",data:{count:$("#count").val(),lableName:t.lableName},dataType:"json",async:!0,success:function(o){$("#"+t.compId+"_lablename").text(o.lableName),$("#"+t.compId+"_reputation_score").attr("style","width:"+20*o.scoreTotal+"%"),t.bindSomeEvent(),Utils.ajaxLoadComplate(t)}}):t.bindSomeEvent()},Comps.Screen=function(t){this.compId=t.compId,this.config=t},Comps.Screen.prototype.init=function(){var t=this,o=this.config.needAsyncInit;if(o){var e=t._getUrlParam("attrValue"),a={compId:t.config.compId,keyword:t._getUrlParam("keyword"),categoryUuid:t._getUrlParam("categoryUuid"),sortType:t._getUrlParam("sortType"),sortBy:t._getUrlParam("sortBy"),attrValue:t._getUrlParam("attrValue"),nowPage:t._getUrlParam("nowPage"),attrValue:e,pageShow:this.config.pageShow};this.ajaxLoadData(a),this._bindEvent()}},Comps.Screen.prototype.ajaxLoadData=function(t){var o=this,e=o.config.compId,a=$("#"+e),i=t.attrValue,r=o._getUrlParam("categoryUuid");$.isEmptyObject(r)||(i=$.isEmptyObject(i)?"categoryUuid_"+r:"categoryUuid_"+r+"@"+i),$.ajax({url:"/screenComp/ajaxLoadData.json",data:t,success:function(t){$.isEmptyObject(i)||o._renderChooseAttr(a,i,e),o._renderScreenMoudle(a,e,t,i),Utils.ajaxLoadComplate(o)}})},Comps.Screen.prototype._renderScreenMoudle=function(t,o,e,a){var i=e.brands,r=e.prices,n=e.attributeList,c=e.cateList;if(!this._isHaveQuery("attributeBrand",a)&&null!=i&&i.length>0)this._renderBrandLoop(t,o,i);else{var p=$("#"+o+"_brandModule");p.remove()}if(!this._isHaveQuery("attributePrice",a)&&null!=r&&r.length>0)this._renderPrice(t,o,r);else{var s=$("#"+o+"_priceModule");s.remove()}if(!this._isHaveQuery("categoryUuid",a)&&null!=c&&c.length>1)this._renderCategory(t,c,o);else{var d=$("#"+o+"_categoryModule");d.remove()}this._loopAddOtherEle(t,n,a)},Comps.Screen.prototype._isHaveQuery=function(t,o){if(null!=o){var e=o.split("@");if(null!=e)for(var a=0;a<e.length;++a){var i=e[a],r=i.split("_");if(null!=r&&r[0]==t)return!0}}return!1},Comps.Screen.prototype._renderBrandLoop=function(t,o,e){for(var a=$("#"+o+"_brandLoop"),i=a.find(".j_brand").first(),r=0;r<e.length;++r){var n=e[r],c=n.brandEnName,p=c.charAt(0);p=p.toLowerCase();var s=i.clone();this._renderBrandInfo(s,n,p),a.append(s)}i.remove()},Comps.Screen.prototype._renderBrandInfo=function(t,o,e){var a=this.config.compId,i=t.find(".j_brandUrl").first(),r=t.find(".j_brandImgUrl").first(),n=t.find(".j_brandName").first();i.attr("onclick","doSearch_"+a+"(this,'attributeBrand','"+o.brandName+"')"),i.attr("title",o.brandName),t.attr("data-initial",e),r.attr("src",o.imageUrl1),n.html(o.brandName)},Comps.Screen.prototype._renderCategory=function(t,o,e){for(var a=t.find(".j_cateLoop").first(),i=a.find(".j_cateModule").first(),r=0;r<o.length;++r){var n=o[r],c=i.clone(),p=c.find(".j_value").first(),s=c.find(".j_categoryUuid").first();s.val(n.uuid),p.html(n.categoryName),p.attr("onclick","doSearch_"+e+"(this,'categoryUuid','"+n.uuid+"')"),a.append(c)}i.remove()},Comps.Screen.prototype._renderPrice=function(t,o,e){for(var a=$("#"+o+"_priceLoop"),i=a.find(".j_priceModule").first(),r=0;r<e.length;++r){var n=e[r],c=i.clone(),p=c.find(".j_value").first();0==r?n="0-"+n:r==e.length-1&&(n+="以上"),p.attr("onclick","doSearch_"+o+"(this,'attributePrice','"+n+"')"),p.html(n),a.append(c)}i.remove()},Comps.Screen.prototype._loopAddOtherEle=function(t,o,e){for(var a=t.find(".j_other").first(),i=0;i<o.length;++i){var r=o[i];if(!this._isHaveQuery(r.attributeName,e)){var n=a.clone(),c=n.find(".j_attrName").first();c.html(r.attributeName+"："),this._renderOtherAttr(n,r.attributeName,r.selectValue,r.unit),t.append(n)}}a.remove()},Comps.Screen.prototype._renderOtherAttr=function(t,o,e,a){for(var i=this.config.compId,r=t.find(".j_attrLoop").first(),n=t.find(".j_attrModule").first(),c=0;c<e.length;++c){var p=e[c],s=n.clone(),d=s.find(".j_value").first();d.attr("onclick","doSearch_"+i+"(this,'"+o+"','"+p+"')"),d.html(p+a),r.append(s)}n.remove()},Comps.Screen.prototype._renderChooseAttr=function(t,o,e){for(var a=$("#"+e+"_chooseAttributesDIV"),i=$("#"+e+"_chooseAttributes"),r=i.find(".j_attribute").first(),n=o.split("@"),c=0;c<n.length;++c){var p=n[c],s=r.clone(),d=s.find(".j_attrName").first(),l=s.find(".j_attrValue").first(),m=p.split("_");s.attr("data-name",m[0]),"attributeBrand"==m[0]?d.html("品牌"):"attributePrice"==m[0]?d.html("价格"):d.html(m[0]),l.html(m[1]),i.append(s)}r.remove(),a.attr("style","display:block")},Comps.Screen.prototype._getUrlParam=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?decodeURIComponent(e[2]):null},Comps.Screen.prototype._bindEvent=function(){var t=this.config.compId;$(".j_extMore").click(function(){$(this).parents(".sl-wrap").toggleClass("extend"),$(".j_brand").prop("style","display:block")}),$(".j_brandLetter li").hover(function(){$(".j_brand").prop("style","display:none");var t=$(this).data("initial");$(".j_brand").each(function(){var o=$(this).data("initial");o!=t&&0!=t||$(this).prop("style","display:block")})}),$("#"+t).delegate(".j_extMultiple","click",function(){$(this).parents(".sl-wrap").addClass("multiple"),$(".j_brand").prop("style","display:block"),$(".sl-ext").prop("style","display:none")}),$("#"+t).delegate(".j_btnsCancel","click",function(){$(this).parents(".sl-wrap").removeClass("multiple"),$(".sl-ext").prop("style","display:block");var t=$(this).parents(".sl-wrap").find(".j_selectedDiv");t.data("attrName",""),t.data("attrValue",""),t.find("ul").html(""),t.hide(),$(".j_btnsConfirm").addClass("disabled")}),$(".conditioned").delegate(".fa","click",function(){var o=$(this).parents(".j_attribute").data("name");$(this).parents(".j_attribute").remove();var e=window.location.href,a=new RegExp("(^|&)attrValue=([^&]*)"),i=e.match(a);if($.isEmptyObject($("#"+t+"_chooseAttributes").html().trim()))e=e.replace(i[0],"");else{var r=i[2].match(new RegExp("(^|%40)"+encodeURI(o)+"_(((?!%40).)*)"));e=e.replace(r[0],"")}window.location.href=e}),$("#"+t).delegate("#"+t+"_clearAll","click",function(){var t=window.location.href,o=new RegExp("(^|&)attrValue=([^&]*)"),e=t.match(o);t=t.replace(e[0],""),window.location.href=t}),$("#"+t).delegate(".j_selectedAttr","click",function(){var t=$(this).parents(".j_selectedDiv").data("attrValue"),o=$(this).find("a").prop("title"),e=new RegExp("(^|、)"+o+"([^、]*)"),a=t.match(e);
$(this).parents(".j_selectedDiv").data("attrValue",t.replace(a[0],"")),$(this).remove()})},Comps.ShareModel=function(t){this.compId=t.compId,this.imgSize=t.imgSize,this.needAsyncInit=t.needAsyncInit,this.lableName=t.lableName},Comps.ShareModel.prototype.init=function(){var t=this;this.needAsyncInit&&$.ajax({type:"GET",url:"/shareComp/ajaxLoadData",data:{imgSize:t.imgSize,lableName:t.lableName},dataType:"json",async:!0,success:function(o){$("#"+t.compId+"_share_name").first().text(o.lableName),$("#"+t.compId+"_share_detail").attr("imgsize",o.imgSize),t.bindSomeEvent(),Utils.ajaxLoadComplate(t)}})},Comps.ShareModel.prototype.bindSomeEvent=function(){var that=this;with(window._bd_share_config={common:{bdSnsKey:{},bdText:"",bdMini:"2",bdMiniList:!1,bdPic:"",bdStyle:"0",bdSize:that.imgSize},share:{},image2:{viewList:["qzone","tsina","weixin"],viewText:"分享到：",viewSize:"16"},selectShare:{bdContainerClass:null,bdSelectMiniList:["qzone","tsina","weixin"]}},document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]},Comps.ShopInfo=function(t){this.compId=t.compId,this.needAsyncInit=t.needAsyncInit},Comps.ShopInfo.prototype.GetQueryString=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?unescape(e[2]):null},Comps.ShopInfo.prototype.init=function(){var t=this,o=t.GetQueryString("productUuid");o||(o=""),this.needAsyncInit?$.ajax({type:"GET",url:"/shopInfoComp/ajaxLoadData",data:{productUuid:o},dataType:"json",async:!0,success:function(o){$("#"+t.compId+"_shopinfo_name").text(o.shopName),$("#"+t.compId+"_shopinfo_name").attr("href","/dfFront/toShopPage/"+o.shopUuid+"/pc"),$("#"+t.compId+"_shopinfo_look").attr("href","/dfFront/toShopPage/"+o.shopUuid+"/pc"),$("#"+t.compId+"_shopinfo_name").attr("title",o.shopName),$("#"+t.compId+"_shopinfo_score").text(o.scoreTotal),$("#"+t.compId+"_descScore").text(o.descScore),$("#"+t.compId+"_attitudeScore").text(o.attitudeScore),$("#"+t.compId+"_speedScore").text(o.speedScore),$("#"+t.compId+"_shopinfo_attention").attr("uuid",o.shopUuid),t.bindSomeEvent(),Utils.ajaxLoadComplate(t)}}):t.bindSomeEvent()},Comps.ShopInfo.prototype.collectShop=function(t){var o=this,e="/collectionShopComp/collectShop";$.ajax({type:"GET",url:e,data:{shopUuid:t,ranNum:Math.random()},dataType:"json",async:!1,success:function(t){var e="<B>";"1"==t.state?e="收藏成功,":"2"==t.state?e="收藏失败,":"3"==t.state&&(e="您已经收藏过该店铺了"),e+="</B>",layui.use("layer",function(){layer.open({type:1,area:["400px","300px"],content:e+"<br>共收藏了"+t.count+"个店铺<font color='red'><a href='"+o.collectShopUrl+"'>查看收藏夹</a></font>"})}),Utils.ajaxLoadComplate(o)}})},Comps.ShopInfo.prototype.bindSomeEvent=function(){var t=this;$("#"+t.compId+"_shopinfo_attention").click(function(){var o=$(this).attr("uuid");CompMessage.publish(t.topic,"",function(e){t.collectShop(o)})})},Comps.StoreCategoryComp=function(t){this.compId=t.compId,this.config=t},Comps.StoreCategoryComp.prototype.init=function(){var t=this.config.needAsyncInit;t&&this.ajaxLoad()},Comps.StoreCategoryComp.prototype.ajaxLoad=function(){var t=this,o=this.config.compId;$.ajax({url:"/storeCategoryComp/ajaxLoadData.json",data:{compId:o,storeUuid:t._getUrlParam("storeUuid")},success:function(o){t._loadData(o.data),Utils.ajaxLoadComplate(t)}})},Comps.StoreCategoryComp.prototype._loadData=function(t){var o=this.config.compId,e=this.config.showType,a=this.config.firstLevelNum,i=$("#"+o+"_dropDiv"),r=$("#"+o+"_loop"),n=r.find("li");0==e&&i.prop("style","display:block");var c=t.length;c>a&&(c=a);for(var p=0;p<c;++p){var s=t[p],d=n.clone();d=this._renderFirstCat(d,s),d=this._renderRitghtCat(d,s),r.append(d)}n.remove()},Comps.StoreCategoryComp.prototype._renderFirstCat=function(t,o){var e=this.config.showLevel,a=this.config.isShowImage,i=this.config.secondLevelNum,r=t.find(".j_catImg"),n=t.find(".j_firstCat"),c=t.find(".j_secCatLoop"),p=c.find(".j_secCat");if(0==a&&r.prop("src",o.img),n.html(o.categoryName),n.prop("href",o.url),1==e){var s=o.subCategory,d=s.length;d>i&&(d=i);for(var l=0;l<d;++l){var m=s[l],u=p.clone();u.prop("href",m.url),u.html(m.categoryName),c.append(u)}}return p.remove(),t},Comps.StoreCategoryComp.prototype._renderRitghtCat=function(t,o){for(var e=t.find(".j_rightLoop"),a=e.find(".j_rightDl"),i=o.subCategory,r=0;r<i.length;++r){var n=i[r],c=a.clone(),p=c.find(".j_rightSecCat");p.prop("href",n.url),p.html(n.categoryName);var s=c.find(".j_rightThdCatLoop"),d=c.find(".j_rightThdCat"),l=n.subCategory;if(!$.isEmptyObject(l))for(var m=0;m<l.length;++m){var u=l[m],h=d.clone();h.prop("href",u.url),h.html(u.categoryName),s.append(h)}d.remove(),e.append(c)}return a.remove(),t},Comps.StoreCategoryComp.prototype._getUrlParam=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?decodeURIComponent(e[2]):null},Comps.StoreList=function(t){this.compId=t.compId,this.config=t},Comps.StoreList.prototype.init=function(){var t=this,o=t.config.needAsyncInit,e=$("#"+t.config.compId+"_storeTotalNum").html();o?t.ajaxLoadData():t._initPages(e,t.config.pageShow)},Comps.StoreList.prototype.ajaxLoadData=function(t){var o=this,e={compId:o.config.compId,keyword:o._getUrlParam("keyword"),nowPage:o._getUrlParam("nowPage"),pageShow:o.config.pageShow};$.extend(e,t),$.ajax({url:"/storeListComp/ajaxLoadData.json",data:e,success:function(t){o._renderStroreList(t),$("html,body").animate({scrollTop:$("#"+o.config.compId+"_storeLoop").offset().top},0),o._initPages(t.totalNum,t.pageShow),Utils.ajaxLoadComplate(o)}})},Comps.StoreList.prototype._renderStroreList=function(t){var o=this.config.compId,e=$("#"+o+"_stores"),a=$("#"+o+"_noResult"),i=$("#"+o+"_storeLoop"),r=$("#"+o+"_storeTotalNum"),n=e.find(".j_store").first();e.find(".j_store").remove();var c=t.storeList;if(c.length>0){r.html(t.totalNum),a.remove();for(var p=0;p<c.length;++p){var s=c[p],d=n.clone();this._renderStoreInfo(d,s),i.append(d)}}else n.remove()},Comps.StoreList.prototype._renderStoreInfo=function(t,o){var e=t.find(".j_storeId"),a=t.find(".j_pic"),i=t.find(".j_picHover"),r=t.find(".j_storeName"),n=t.find(".j_storeUrl"),c=t.find(".j_favoriteCount"),p=t.find(".j_saleCount");e.html(o.uuid),a.prop("src",o.storeLogo),a.prop("alt",o.storeName),i.prop("src",o.storeLogo),i.prop("alt",o.storeName),r.prop("href",this.config.storeUrl+o.uuid),r.html(o.storeName),n.prop("href",this.config.storeUrl+o.uuid),r.prop("title",o.storeName),c.html(o.favoriteCount),p.html(o.saleCount)},Comps.StoreList.prototype._initPages=function(t,o){var e=this,a=e.config.compId;layui.use(["laypage","layer"],function(){var i=layui.laypage,r=(layui.layer,Math.ceil(t/o));r<1&&(r=1);var n=window.location.href,c=new RegExp("(^|&)nowPage=([^&]*)"),p=n.match(c);if(!$.isEmptyObject(p))var s=p[2];i({cont:a+"_paging",pages:r,groups:5,curr:s,jump:function(t,o){if(!o){var a=$.isEmptyObject(p)?"":p[0];e.changeUrl(n,a,"&nowPage="+t.curr),e.render()}}})})},Comps.StoreList.prototype.changeUrl=function(t,o,e){var a=document.title,i={url:t,title:a};$.isEmptyObject(o)?t+=e:t=t.replace(o,e),window.history.pushState(i,a,t)},Comps.StoreList.prototype._getUrlParam=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?decodeURIComponent(e[2]):null},Comps.StoreList.prototype._bindEvent=function(){var t=this,o=this.compId;$("a[id^='"+o+"_sort_']").click(function(){var o=$(this).prop("name"),e="1",a=$(this).find("i").attr("class");"fa fa-long-arrow-up"==a?e="1":"fa fa-long-arrow-down"==a&&(e="2");var i={sortBy:o,sortType:e,nowPage:"1"};$(this).find(".fa").toggleClass("fa-long-arrow-down").toggleClass("fa-long-arrow-up"),t.ajaxLoadData(i)})},Comps.StoreProductList=function(t){this.compId=t.compId,this.config=t},Comps.StoreProductList.prototype.init=function(){var t=this,o=t.config.needAsyncInit,e=$("#"+t.config.compId+"_productTotalNum").html();o?t.ajaxLoadData():t._initPages(e,t.config.pageShow)},Comps.StoreProductList.prototype.ajaxLoadData=function(t){var o=this,e={compId:o.config.compId,keyword:o._getUrlParam("keyword"),storeUuid:o._getUrlParam("storeUuid"),categoryUuid:o._getUrlParam("categoryUuid"),startPrice:o._getUrlParam("startPrice"),endPrice:o._getUrlParam("endPrice"),sortType:o._getUrlParam("sortType"),sortBy:o._getUrlParam("sortBy"),nowPage:o._getUrlParam("nowPage"),pageShow:o.config.pageShow};$.extend(e,t),$.ajax({url:"/storeProductListComp/ajaxLoadData.json",data:e,success:function(t){o._renderProdcutList(t),$("html,body").animate({scrollTop:$("#"+o.config.compId+"_productLoop").offset().top},0),o._initPages(t.totalNum,t.pageShow),Utils.ajaxLoadComplate(o)}})},Comps.StoreProductList.prototype._renderProdcutList=function(t){var o=this.config.compId,e=$("#"+o+"_products"),a=$("#"+o+"_noResult"),i=$("#"+o+"_productLoop"),r=$("#"+o+"_productTotalNum"),n=e.find(".j_product").first();e.find(".j_product").remove();var c=t.productList;if(c.length>0){r.html(t.totalNum),a.remove();for(var p=0;p<c.length;++p){var s=c[p],d=n.clone();this._renderProductInfo(d,s),i.append(d)}}else n.remove()},Comps.StoreProductList.prototype._renderProductInfo=function(t,o){var e=t.find(".j_productId"),a=t.find(".j_pic"),i=t.find(".j_picHover"),r=t.find(".j_score"),n=t.find(".j_productName"),c=t.find(".j_productUrl"),p=t.find(".j_recommend"),s=t.find(".j_price"),d=t.find(".j_storeName"),l=t.find(".j_storeLogo");e.html(o.productId),a.prop("src",o.pic),a.prop("alt",o.productName),i.prop("src",o.pic),i.prop("alt",o.productName),r.prop("style","width:"+20*o.score+"%"),n.prop("href",this.config.productInfoUrl+o.productId),n.html(o.productName),c.prop("href",this.config.productInfoUrl+o.productId),p.html(o.recommend),s.html(o.price),d.prop("title",o.sotreName),l.prop("src",o.storeLogo)},Comps.StoreProductList.prototype._initPages=function(t,o){var e=this,a=e.config.compId;layui.use(["laypage","layer"],function(){var i=layui.laypage,r=(layui.layer,Math.ceil(t/o));r<1&&(r=1);var n=window.location.href,c=new RegExp("(^|&)nowPage=([^&]*)"),p=n.match(c);if(!$.isEmptyObject(p))var s=p[2];i({cont:a+"_paging",pages:r,groups:5,curr:s,jump:function(t,o){if(!o){var a=$.isEmptyObject(p)?"":p[0];e.changeUrl(n,a,"&nowPage="+t.curr),e.ajaxLoadData()}}})})},Comps.StoreProductList.prototype.changeUrl=function(t,o,e){var a=document.title,i={url:t,title:a};$.isEmptyObject(o)?t+=e:t=t.replace(o,e),window.history.pushState(i,a,t)},Comps.StoreProductList.prototype._getUrlParam=function(t){var o=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),e=window.location.search.substr(1).match(o);return null!=e?decodeURIComponent(e[2]):null},Comps.StoreProductList.prototype._bindEvent=function(){var t=this,o=t.config.compId;$("a[id^='"+o+"_sort_']").click(function(){var o=$(this).prop("name"),e="1",a=$(this).find("i").attr("class");"fa fa-long-arrow-up"==a?e="1":"fa fa-long-arrow-down"==a&&(e="2");var i={sortBy:o,sortType:e,nowPage:"1"};$(this).find(".fa").toggleClass("fa-long-arrow-down").toggleClass("fa-long-arrow-up"),t.ajaxLoadData(i)})},Comps.StoreSearchComp=function(t){this.compId=t.compId,this.config=t},Comps.StoreSearchComp.prototype.init=function(){this._bindEvent(),Utils.ajaxLoadComplate(this)},Comps.StoreSearchComp.prototype.search=function(){var t=this.config.compId,o=this.config.searchUrl,e=$("#"+t+"_keyword").val(),a=$("#"+t+"_startPrice").val(),i=$("#"+t+"_endPrice").val();$.isEmptyObject(e)&&(e="");var r=o+"&keyword="+e;$.isEmptyObject(a)||(r+="&startPrice="+a),$.isEmptyObject(i)||(r+="&endPrice="+i),window.location.href=r},Comps.StoreSearchComp.prototype._bindEvent=function(){var t=this,o=this.config.compId;$("#"+o+"_searchProduct").click(function(){t.search()})};