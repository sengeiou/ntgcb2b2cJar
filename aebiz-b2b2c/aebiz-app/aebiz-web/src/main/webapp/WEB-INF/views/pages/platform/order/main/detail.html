<!--#
layout("/layouts/platform.html"){
#-->
<header class="header navbar bg-white shadow">
    <div class="btn-group tool-button">
        <a class="btn btn-primary navbar-btn" href="${base}/platform/order/main" id="goBack" data-pjax><i class="ti-angle-left"></i>${msg['globals.button.back']}</a>
    </div>
    <div class="pull-right">

    </div>
</header>
<script src="${base!}/assets/common/vendor/city-picker/js/data.86.all.js" type="text/javascript"></script>
<script src="${base!}/assets/common/vendor/city-picker/js/picker.86.js" type="text/javascript"></script>
<div class="content-wrap bg-white">
    <div class="wrapper" style="min-height:500px;top:50px;">
        <div class="panel-body" style="margin-bottom: 35px">
            <input type="hidden" name="id" value="${obj.id}">

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">基本信息</h3>
                </div>
                <div class="panel-body">
                    <div class="col-md-10 col-md-offset-1">
                        <div class="col-md-4" style="padding: 5px 0px">
                            订单编号:   <span>${obj.id}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            会员昵称:   <span>${obj.accountInfo.nickname}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            用户名:   <span>${obj.accountUser.loginname}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            订单来源:   <span>${@com.aebiz.app.order.modules.models.em.OrderSourceEnum.getValue(obj.orderSrc)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            下单时间:   <span><!--#if(!isEmpty(obj.orderAt)){#-->${@date.getDate(obj.orderAt)} <!--#}#--></span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            订单优惠:   <span>￥${obj.freeMoney}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            付款状态:   <span>${@com.aebiz.app.order.modules.models.em.OrderPayStatusEnum.getValue(obj.payStatus)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            支付方式:   <span>${@com.aebiz.app.order.modules.models.em.OrderPayTypeEnum.getValue(obj.payType)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            支付时间:   <span><!--#if(!isEmpty(obj.payAt)){#-->${@date.getDate(obj.payAt)} <!--#}#--></span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            商品总价:   <span>￥${@money.fenToYuan(obj.goodsMoney)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            配送费用:   <span>￥${@money.fenToYuan(obj.freightMoney)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            实付现金:   <span>￥${@money.fenToYuan(obj.payMoney)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            发货状态:   <span>${@com.aebiz.app.order.modules.models.em.OrderDeliveryStatusEnum.getValue(obj.deliveryStatus)}</span>
                        </div>
                        <div class="col-md-8" style="padding: 5px 0px">
                            发货时间:   <span><!--#if(!isEmpty(obj.payAt)){#-->${@date.getDate(obj.payAt)} <!--#}#--></span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            收货状态:   <span>${@com.aebiz.app.order.modules.models.em.OrderGetStatusEnum.getValue(obj.getStatus)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            收货时间:   <span><!--#if(!isEmpty(obj.getAt)){#-->${@date.getDate(obj.getAt)} <!--#}#--></span>
                        </div>

                        <!-- <div class="col-md-4" style="padding: 5px 0px">
                             商品数量:   <span>${@orderGoods.size()}</span>
                         </div>
                         <div class="col-md-4" style="padding: 5px 0px">
                             商品重量:   <span>${obj.goodsWeight}</span>
                         </div>
                         <div class="col-md-4" style="padding: 5px 0px">
                             参与活动:   <span>双11促销</span>
                         </div> -->
                        <div class="col-md-12" style="padding: 5px 0px">
                            订单备注:   <span>${obj.mark}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">订单支付凭证</h3>
                </div>
                <div class="panel-body">
                    <div class="col-md-10 col-md-offset-1">
                        <!--# if(isEmpty(payTransfers)){ #-->
                        <span>暂无图片</span>
                        <!--# } #-->
                        <!--# for(var payTransfer in payTransfers){ #-->
                        <div id="img" class="div-img-album">
                            <div class="col-sm-6 col-md-3">
                                <a href="${payTransfer.uploadImage}" class="thumbnail">
                                    <img id="${payTransfer.id}" src="${payTransfer.uploadImage}">
                                </a>
                            </div>
                        </div>
                        <!--#} #-->
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">收货信息</h3>
                </div>
                <div class="panel-body">
                    <div class="col-md-10 col-md-offset-1">
                        <div class="col-md-4" style="padding: 5px 0px">
                            收件人:   <span>${obj.deliveryName}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            手机号码:   <span>${obj.deliveryMobile}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            固定电话:   <span>${obj.deliveryPhone}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            邮编:   <span>${obj.deliveryPostcode}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            配送状态:   <span>${@com.aebiz.app.order.modules.models.em.OrderDeliveryStatusEnum.getValue(obj.deliveryStatus)}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            发货时间:   <span><!--#if(!isEmpty(obj.deliveryAt)){#-->${@date.getDate(obj.deliveryAt)} <!--#}#--></span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            物流公司:   <span>${obj.expressName!}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            物流单号:   <span>${obj.expressNo!}</span>
                        </div>
                        <div class="col-md-4" style="padding: 5px 0px">
                            收货时间:   <span><!--#if(!isEmpty(obj.getAt)){#-->${@date.getDate(obj.getAt)} <!--#}#--></span>
                        </div>
                        <div class="col-md-12" style="padding: 5px 0px">
                            收货地址:   <span>${@area.getNameByCode(obj.deliveryProvince)} ${@area.getNameByCode(obj.deliveryCity)} ${@area.getNameByCode(obj.deliveryCounty)} ${obj.deliveryAddress}</span>
                        </div>
                        <div class="col-md-12" style="padding: 5px 0px">
                            买家留言:   <span>${obj.note}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">商品信息</h3>
                </div>
                <div class="panel-body">
                    <div class="table-responsive ">
                        <table class="table">
                            <caption></caption>
                            <thead>
                            <tr>
                                <th>商品</th>
                                <th>销售价</th>
                                <th>购买价</th>
                                <th>数量</th>
                                <th>优惠</th>
                                <th>配送费</th>
                                <th>应付总金额</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!--#for(o in orderGoods ){  #-->
                            <tr style="border-bottom: 1px solid #dfe6ec;">
                                <td>${o.goodsName} ${o.name}</td>
                                <td>￥${@money.fenToYuan(o.salePrice)}</td>
                                <td>￥${@money.fenToYuan(o.buyPrice)}</td>
                                <td>${o.buyNum}</td>
                                <td>￥${@money.fenToYuan(o.freeMoney)}</td>
                                <!--# if(oLP.first ){ #-->    <!--border-bottom: 1px solid #dfe6ec;-->
                                <td rowspan="${@orderGoods.size()}" style="text-align: center;border: 1px solid #dfe6ec;vertical-align: middle;">￥${@money.fenToYuan(obj.freightMoney)}</td>
                                <td rowspan="${@orderGoods.size()}" style="text-align: center;border: 1px solid #dfe6ec;vertical-align: middle;">￥${@money.fenToYuan(obj.payMoney)}</td>
                                <!--# }#-->
                            </tr>
                            <!--#}#-->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">订单日志</h3>
                </div>
                <div class="panel-body">
                    <div class="table-responsive ">
                        <table class="table">
                            <caption></caption>
                            <thead>
                            <tr>
                                <th>操作时间</th>
                                <th>操作人</th>
                                <th>操作类型</th>
                                <th>操作内容</th>
                            </tr>
                            </thead>
                            <tbody>
                            <!--#for(log in orderLogList){  #-->
                            <tr style="border-bottom: 1px solid #dfe6ec;">
                                <td><!--#if(!isEmpty(log.opAt)){#-->${@date.getDate(log.opAt)} <!--#}#--></td>
                                <td>${log.opByName!}</td>
                                <td>${@com.aebiz.app.order.modules.models.em.OrderLogBehaviorEnum.getValue(log.behavior)}</td>
                                <td>${log.note}</td>
                            </tr>
                            <!--#}#-->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<style>
    table .s-input{margin: auto;}
    table,table.s-table tr td,table tr th{border: 1px solid #ddd;text-align: center;vertical-align: middle;}
</style>
<script>
    var id = $("input[name='id']").val();
    $(document).ready(function () {
        $("input[name='feedScore']").rating();
    });

    $(function() {
        $('#dialogOperation').on('hide.bs.modal',
            function() {
                //$.pjax({url:"${base!}/platform/self/order/main/detail/"+id,  container: '#container'});
            })
    });


</script>
<!--#}#-->